# Чек-лист полной проверки Deadline Mini-App

> **Цель:** смоделировать поведение реального пользователя и убедиться, что фронтенд, бэкенд и интеграции Telegram работают корректно на актуальной сборке.

## 1. Подготовка окружения
- [ ] Очистить кэш Telegram Mini-App: `Настройки → Дополнительно → Очисить память`. Повторить для мобильного и десктопного клиента.
- [ ] Убедиться, что деплой `https://deadline-frontend.hb.bizmrg.com` отдает свежие ассеты (проверка заголовков `cache-control`, хэшей файлов).
- [ ] Проверить доступность API на `https://api.deadline.185-241-195-19.sslip.io/api` и наличие переменной окружения `MONGODB_URI` на сервере.
- [ ] Заполнить `.env` в `backend/` локально (если нужно прогонять против стейджа) и перезапустить backend `pm2`/`systemd` сервис.
- [ ] Подготовить пользователя для теста (`QA_SIM_USER`) или очистить существующего через панель MongoDB.

## 2. Автоматические проверки API
- [ ] Выполнить скрипт `npm run qa:api` (или `node qa/scripts/api-smoke.js --base=https://api.deadline.185-241-195-19.sslip.io/api`).
  - Ожидается статус 200 от `/api`, `/api/health`, `/api/test`.
  - Создание/чтение/удаление задач для тестового пользователя завершаются без ошибок.
  - Возврат пустого объекта задач при первом запуске.
- [ ] Зафиксировать результаты в протоколе (при ошибке — приложить лог).

## 3. Автоматические проверки UI (Playwright)
- [ ] Запустить фронтенд (локально `npm run dev -- --host`) либо указать прод-URL `QA_FRONTEND_URL`.
- [ ] Выполнить `npm run qa:ui`.
  - Скрипт должен пройти сценарий: добавить задачу, отметить избранной, отфильтровать, завершить и удалить.
  - Проверить, что прогресс обновляется, фильтры резетятся без ошибок.
- [ ] Убедиться, что тест завершается со статусом `1 passed`.

## 4. Ручная пользовательская сессия (мобильный клиент Telegram)
- [ ] Открыть Mini-App из Telegram (`/deadline`) и дождаться полной загрузки.
- [ ] На вкладке «Задачи»: добавить две задачи с разными категориями и датами, отметить одну избранной.
- [ ] Применить фильтр по избранным — отображается только помеченная задача.
- [ ] Переключиться на вкладку «Календарь», убедиться, что соответствующие даты подсвечены.
- [ ] Вернуться к первой задаче, отметить выполненной и убедиться, что она исчезает из блока «Дедлайн сегодня».
- [ ] Проверить экспорт: перейти в «Профиль» → «Экспорт задач», сохранить файл и убедиться, что данные валидные.
- [ ] Проверить импорт: очистить локальные данные (кнопка «Импорт задач» → выбрать ранее сохраненный файл) — задачи восстанавливаются.

## 5. Регрессия интеграций
- [ ] На backend запустить `POST /api/remind/:userId` с тестовым сообщением — в логах сервера появляется запись о напоминании.
- [ ] Убедиться, что CORS разрешает домены `deadline-frontend.hb.bizmrg.com` и Telegram WebView (проверить ответ заголовка `access-control-allow-origin`).
- [ ] Проверить, что offline-режим работает: выключить интернет на устройстве, обновить страницу, задачи из localStorage остаются доступными.

## 6. Пост-проверка
- [ ] Сбросить тестового пользователя (удалить задачи через MongoDB или API `DELETE /api/tasks/:userId/:date`).
- [ ] Внести результаты проверки в журнал релизов.
- [ ] Сообщить команде о статусе (успех/дефекты) и приложить скриншоты/логи.
